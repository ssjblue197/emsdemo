(function(e){function t(t){for(var n,o,i=t[0],c=t[1],l=t[2],d=0,f=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"24d3":function(e,t,a){},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id="4678"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{staticClass:"bg-grey-2 text-dark",attrs:{view:"lHh Lpr lFf"}},[a("q-page-container",[a("router-view")],1)],1)},r=[],o={},i=o,c=a("2877"),l=a("4d5a"),u=a("09e3"),d=a("93dc"),f=a.n(d),m=Object(c["a"])(i,s,r,!1,null,null,null),h=m.exports;f()(m,"components",{QLayout:l["a"],QPageContainer:u["a"]});var p=a("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",{attrs:{view:"hHh lpR fFf"}},[n("q-header",{staticClass:"bg-dark text-blue",attrs:{elevated:""}},[n("q-toolbar",[n("q-toolbar-title",[n("q-avatar",[n("img",{attrs:{src:a("cf05")}})]),e._v(" EMS WELCOME SCREEN ")],1),n("i",{staticClass:"fa fa-sign-out-alt",staticStyle:{"margin-right":"40px"},on:{click:function(t){return e.Logout()}}},[e._v("Đăng xuất")]),n("q-btn",{attrs:{dense:"",flat:"",round:"",icon:"dashboard"},on:{click:function(t){e.right=!e.right}}})],1)],1),n("q-drawer",{attrs:{width:300,side:"right",overlay:"",elevated:"","content-class":"q-pa-sm bg-grey-9 text-white text-center noscroll"},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}},[n("q-card",{staticClass:"my-card",staticStyle:{background:"radial-gradient(circle, #35a2ff 0%, #014a88 100%)"}},[n("q-card-section",[n("clock",{staticStyle:{"font-size":"18px",color:"white","font-weight":"bold"}}),n("p",{staticStyle:{"font-size":"18px",color:"lime","font-weight":"bold"}},[e._v(" ĐÃ ĐẾN: 5/10 ")]),n("p",{staticStyle:{"font-size":"18px",color:"red","font-weight":"bold"}},[e._v(" VẮNG: 5/10 ")])],1)],1),n("hr"),n("div",{staticStyle:{height:"62%"}},[n("q-table",{attrs:{data:e.data,columns:e.columns,"row-key":"name","rows-per-page-options":[10]}})],1),n("br"),n("hr"),n("q-card",{staticClass:"my-card bg-secondary",staticStyle:{"margin-bottom":"5px"}},[n("q-card-section",{staticStyle:{padding:"5px"}},[n("q-select",{staticStyle:{"margin-bottom":"5px"},attrs:{color:"red",outlined:"","option-value":"id",options:this.genListOptions(this.camerasDisplay),label:"Chọn View"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"image"}})]},proxy:!0}]),model:{value:e.viewSrc,callback:function(t){e.viewSrc=t},expression:"viewSrc"}}),n("q-select",{attrs:{color:"red",outlined:"","option-value":"id",options:this.genListOptions(this.camerasDisplay),multiple:"",label:"Chọn Sensors"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"camera"}})]},proxy:!0}]),model:{value:e.sensorsSelected,callback:function(t){e.sensorsSelected=t},expression:"sensorsSelected"}})],1)],1)],1),n("q-page-container",[n("q-page",{staticStyle:{"background-color":"grey"}},[n("cam-live-img",{attrs:{liveUrl:e.genLiveUrl(e.viewSrc)}}),n("span",{staticClass:"event-text-color",staticStyle:{position:"fixed",top:"80px",left:"35%","max-width":"1060px","border-radius":"10px"}},[""!==this.messageShow?n("div",{staticClass:"text-center",staticStyle:{"font-weight":"600","max-width":"1000px","font-size":"2.5rem"}},[n("span",{staticStyle:{"padding-left":"10px"}},[e._v("Chào mừng: ")]),e._l(this.filterText(this.messageShow),(function(t){return n("span",{key:t,staticStyle:{padding:"0 10px"}},[e._v(" "+e._s(t)+" "),n("br")])}))],2):e._e()]),null!==e.eventShow?n("span",{staticClass:"cols-2",staticStyle:{position:"fixed",width:"180px",height:"240px",left:"10px",top:"60px"}},[n("NewestFaceItem",{attrs:{event:e.eventShow}})],1):e._e(),n("span",{staticStyle:{position:"fixed",bottom:"5px",left:"80px",width:"100%"}},[n("attendance-newest-face-list",{attrs:{events:e.listItemDisplay}})],1)],1)],1)],1)},g=[],b=(a("caad"),a("d81d"),a("fb6a"),a("a434"),a("b0c0"),a("a9e3"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("1276"),a("ddb0"),a("96cf"),a("1da1")),A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v(e._s(e.currentDatetime))])},j=[],w=a("7f45"),y=a.n(w),k={name:"clock",props:{format:{type:String,default:"HH:mm:ss - DD/MM/YYYY"}},mounted:function(){var e=this;this.secondClockInterval=setInterval((function(){e.currentDatetime=y()().format(e.format)}),1e3)},data:function(){return{secondClockInterval:null,currentDatetime:y()().format(this.format)}},beforeDestroy:function(){this.secondClockInterval&&clearInterval(this.secondClockInterval)}},L=k,x=Object(c["a"])(L,A,j,!1,null,null,null),I=x.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-img",{attrs:{src:e.url}})},S=[],D={API_URL:"http://10.2.23.253:8080/api",ROOT_URL:"http://10.2.23.253:8080/",API_TOKEN:"371057e64fa3df8815220b008cba50b6",CAM_LIVE_RELOAD_URL:5e3,CLEAR_LASTWELCOME:"60000",CLEAR_BLACKLIST:"3600000",TIME_NEXT_TO_WELCOME:"5000",MAX_ATTENDANCE_FACE:12,ATTENDANCE_FACE_INTERVAL:1e4,SERVER_ID:13,REFRESH_CAMERA:2e3},E=D,U={props:["liveUrl"],name:"cam-live-img",mounted:function(){this.$nextTick((function(){var e=this;this.reloadCamInterval=setInterval((function(){e.url=e.liveUrl}),E.CAM_LIVE_RELOAD_URL)}))},data:function(){return{url:this.liveUrl,reloadCamInterval:null}},beforeDestroy:function(){this.reloadCamInterval&&clearInterval(this.reloadCamInterval)}},O=U,T=a("068f"),M=Object(c["a"])(O,C,S,!1,null,null,null),R=M.exports;f()(M,"components",{QImg:T["a"]});var N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"border"},[a("q-card",[a("div",{staticClass:"text-center"},[a("q-img",{attrs:{src:e.BASE_URL+e.event.image,ratio:3/4}},[a("span",{staticClass:"event-text"},[e._v(e._s(e.event.text))]),a("br"),a("span",{staticClass:"event-text"},[e._v(e._s(e.display(e.event.createdAt)))])])],1)])],1)},W=[],P={props:{event:{type:Object}},data:function(){return{BASE_URL:E.API_URL}},methods:{display:function(e){return this.$moment(e).isSame(this.$moment(),"day")?this.$moment(e).format("HH:mm:ss"):this.$moment(e).isSame(this.$moment(),"year")?this.$moment(e).format("DD/MM - HH:mm:ss"):this.$moment(e).format("DD/MM/YY")}}},V=P,q=(a("97b7"),a("f09f")),Q=Object(c["a"])(V,N,W,!1,null,"e2d39c82",null),_=Q.exports;f()(Q,"components",{QCard:q["a"],QImg:T["a"]});var z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.events.length?a("div",{staticClass:"px-4 row"},e._l(e.events,(function(e){return a("div",{key:e.id,staticClass:"p-1 cols-1",staticStyle:{width:"135px",height:"180px","margin-right":"5px"}},[a("NewestFaceItem",{attrs:{event:e}})],1)})),0):e._e()},Y=[],F={name:"attendance-newest-face-list",props:["events"],components:{NewestFaceItem:_},mounted:function(){this.$nextTick(Object(b["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(this.events);case 1:case"end":return e.stop()}}),e,this)}))))},data:function(){return{}},methods:{}},K=F,G=Object(c["a"])(K,z,Y,!1,null,"0a6dbf68",null),X=G.exports,H=a("bc3a"),B=a.n(H),J={components:{Clock:I,CamLiveImg:R,NewestFaceItem:_,AttendanceNewestFaceList:X},mounted:function(){this.$nextTick((function(){var e=this;this.getEventNewestAsLandMark(),this.getMonitorList(),this.getCameraList(),this.getCameraInterval(),this.getProfileList(),this.welcomeInterval=setInterval((function(){if(e.checkLogin(),e.blackList.length>0){console.log("BLACK LIST"),console.log(e.blackList);for(var t=[],a=0;a<e.blackList.length;a++){var n=e.$moment(new Date).valueOf();n-Number(e.blackList[a].timeBlacklist)>Number(E.CLEAR_BLACKLIST)&&t.push(a)}for(var s=t.length-1;s>=0;s--)e.blackList.splice(t[s],1)}e.lastEvent&&e.$moment(new Date).valueOf()-e.$moment(e.lastEvent.createdAt).valueOf()>Number(E.CLEAR_LASTWELCOME)&&(e.eventShow=null,e.messageShow="",e.lastEvent={}),e.getListDisplaying();while(e.queueWelcome.length>0){if(e.temp=e.queueWelcome[0],e.queueWelcome.shift(),!e.checkExits(e.blackList,e.temp)){e.setShowWelcome(e.temp.event,e.temp.message),e.temp.timeBlacklist=e.$moment(new Date).valueOf(),e.blackList.push(e.temp),e.getListDisplaying();break}for(var r=0;r<e.blackList.length;r++)if(e.temp.event.profileId===e.blackList[r].event.profileId){e.blackList[r].event=e.temp.event,e.blackList[r].timeBlacklist=e.$moment(new Date).valueOf(),e.getListDisplaying();break}}}),Number(E.TIME_NEXT_TO_WELCOME))}))},computed:{},created:function(){this.checkLogin()},methods:{Logout:function(){localStorage.removeItem("currentUserToken"),this.$router.push("/login")},checkLogin:function(){var e=this,t=localStorage.getItem("currentUserToken");null==t&&this.$router.push("/login"),B.a.get(E.API_URL+"/aiview/getUserInfo",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(){})).catch((function(){e.$router.push("/login")}))},reloadData:function(){var e=this;this.fetchDataInterval&&clearInterval(this.fetchDataInterval),this.fetchDataInterval=setInterval((function(){e.fetchDataList(),e.buildTableWelcome()}),E.ATTENDANCE_FACE_INTERVAL)},buildTableWelcome:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.tableData=e.blackList.map((function(e){return{welcome:e.message}})),t.abrupt("return",e.tableData);case 2:case"end":return t.stop()}}),t)})))()},getEventNewestListPerCam:function(e,t){return Object(b["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=[],s=localStorage.getItem("currentUserToken"),a.prev=2,a.next=5,B.a.get(E.API_URL+"/event-newest?cameraId="+String(e)+"&type=welcome&eventId="+String(t),{headers:{Authorization:"Bearer ".concat(s)}}).then((function(e){e.data.length>0&&(n=e.data)}));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](2),a.t0.response;case 10:return a.abrupt("return",n);case 11:case"end":return a.stop()}}),a,null,[[2,7]])})))()},updateIdMark:function(){this.getEventNewestAsLandMark(),this.idMark=this.eventLandMark[0].id},genLiveUrl:function(e){var t="";if(e.subUrl&&(e.subUrl.includes("http")||e.subUrl.includes("https"))&&(t=e.subUrl),e.value&&(e.value.includes("http")||e.value.includes("https"))&&(t=e.value),""!==t)return t},getNewWelcomeList:function(e){this.newWelcomeList=[];for(var t=0;t<e.length;t++)for(var a=0;a<this.profiles.length;a++)e[t].profileId===this.profiles[a].id&&this.profiles[a].data&&this.newWelcomeList.push(this.profiles[a].data.welcomeMessage);return this.newWelcomeList},fetchDataList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a,n,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1!==e.lastID){t.next=2;break}return t.abrupt("return",[]);case 2:return console.log("LASTID DE LAY SK"),console.log(e.lastID),e.events=[],t.next=7,Promise.all(e.sensorsSelected.map((function(t){if(t.id){var a=e.getEventNewestListPerCam(t.id,e.lastID-1e4);return a}return[]})));case 7:if(a=t.sent,!(e._.flatten(a).length<1)){t.next=10;break}return t.abrupt("return",[]);case 10:if(n=e._.sortBy(e._.flatten(a),"createdAt","asc").reverse(),e.lastID=n[0].id,e.events=e._.uniqBy(n,"profileId"),e.events.length>0&&(e.getNewWelcomeList(e.events),e.updateIdMark(),e.lastID=e.idMark,console.log("LASTID update"),console.log(e.lastID)),e.events.length>0&&e.newWelcomeList.length>0&&e.newWelcomeList.length===e.events.length){for(s=0;s<e.events.length;s++)r={event:e.events[s],message:e.newWelcomeList[s]},e.checkExits(e.queueWelcome,r)||e.queueWelcome.push(r);console.log("QUEUE"),console.log(e.queueWelcome),e.queueWelcome=JSON.parse(JSON.stringify(e.queueWelcome))}case 15:case"end":return t.stop()}}),t)})))()},setShowWelcome:function(e,t){this.lastEvent=e,this.eventShow=e,this.messageShow=t},checkExits:function(e,t){for(var a=0,n=0;n<e.length;n++)Number(t.event.id)===Number(e[n].event.id)&&(console.log("HAI CAI TRUNG NHAU NHU SAU"),console.log(t),console.log(e[n]),a+=1);return a>0},getListDisplaying:function(){if(this.blackList){var e=this.blackList.map((function(e){return e.event}));return e=this._.sortBy(this._.flatten(e),"createdAt","asc").reverse(),this.listItemDisplay=e.slice(0,E.MAX_ATTENDANCE_FACE),this.listItemDisplay}return[]},getEventNewestAsLandMark:function(){var e=this,t=localStorage.getItem("currentUserToken");B.a.get(E.API_URL+"/event-newest?count=1&type=welcome",{headers:{Authorization:"Bearer ".concat(t)}}).then((function(t){return e.eventLandMark=t.data,console.log("EVENT LANMARK:=="),console.log(e.eventLandMark),e.setLastID(),console.log("ID MARK:"),console.log(e.eventLandMark[0].id),e.eventLandMark}))},setLastID:function(){this.eventLandMark[0]&&(this.lastID=this.eventLandMark[0].id)},display:function(e){return this.$moment(e).isSame(this.$moment(),"day")?this.$moment(e).format("HH:mm:ss"):this.$moment(e).isSame(this.$moment(),"year")?this.$moment(e).format("DD/MM - HH:mm:ss"):this.$moment(e).format("DD/MM/YYYY")},getMonitorList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=localStorage.getItem("currentUserToken"),B.a.get(E.API_URL+"/aiview/getAllMonitor",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){return e.monitors=t.data.data,e.monitors}));case 2:case"end":return t.stop()}}),t)})))()},getCameraInterval:function(){var e=this;this.fetchCameraInterval=setInterval((function(){e.getCameraDisplay()}),E.REFRESH_CAMERA)},getCameraDisplay:function(){if(this.camerasDisplay=[],this.cameras&&this.monitors)for(var e=0;e<this.monitors.length;e++)for(var t=0;t<this.cameras.length;t++)this.monitors[e].cameraId==this.cameras[t].id&&4===this.monitors[e].coreId&&this.camerasDisplay.push(this.cameras[t]);return this.camerasDisplay},getCameraList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=localStorage.getItem("currentUserToken"),B.a.get(E.API_URL+"/aiview/getAllcamera",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){return e.cameras=t.data.data,e.cameras}));case 2:case"end":return t.stop()}}),t)})))()},getProfileList:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=localStorage.getItem("currentUserToken"),B.a.get(E.API_URL+"/profile",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){return e.profiles=t.data,console.log(e.profiles),e.profiles}));case 2:case"end":return t.stop()}}),t)})))()},genListOptions:function(e){if(e)return e.map((function(e){return{id:e.cameraId,label:e.cameraName,value:e.liveUrl,subUrl:e.analyticsUrl}}))},filterText:function(e){if(e){var t=e.split("-");return t}},updateCameraSensor:function(){this.reloadData()}},beforeDestroy:function(){this.showHide=!0,this.fetchDataInterval&&clearInterval(this.fetchDataInterval),this.welcomeInterval&&clearInterval(this.welcomeInterval),this.fetchCameraInterval&&clearInterval(this.fetchCameraInterval)},watch:{sensorsSelected:function(){console.log(this.sensorsSelected),this.updateCameraSensor()},viewSrc:function(){console.log(this.viewSrc)}},data:function(){return{idMark:0,eventLandMark:{},blackList:[],userToken:null,lastEvent:{},eventShow:null,camerasDisplay:[],newWelcomeList:[],monitors:[],fetchDataInterval:null,temp:{},queueWelcome:[],welcomeInterval:null,fetchCameraInterval:null,messageShow:"",right:!1,cameras:[],listItemDisplay:[],BASE_URL:E.API_URL,profiles:[],events:[],selectedCameraView:[],selectedCameraSensors:[],viewSrc:"",sensorsSelected:[],columns:[{name:"desc",required:!0,label:"Phòng ban",align:"left",field:function(e){return e.name},format:function(e){return"".concat(e)},sortable:!0,classes:"ellipsis",style:"max-width: 100px",headerClasses:"bg-primary text-white"},{name:"calories",align:"center",label:"Sĩ số",field:"calories",sortable:!0,headerClasses:"bg-secondary text-white",classes:"ellipsis",style:"max-width: 100px"}],data:[{name:"Phòng 1",calories:"1/2"},{name:"Phòng 2",calories:"2/3"},{name:"Phòng 3",calories:"1/3"},{name:"Phòng 4",calories:"1/1"},{name:"Phòng 5",calories:"1/3"},{name:"Phòng 6",calories:"1/2"},{name:"Phòng 7",calories:"2/3"},{name:"Phòng 8",calories:"1/3"},{name:"Phòng 9",calories:"1/1"},{name:"Phòng 10",calories:"1/3"},{name:"Phòng 11",calories:"1/2"},{name:"Phòng 12",calories:"2/3"},{name:"Phòng 13",calories:"1/3"},{name:"Phòng 14",calories:"1/1"},{name:"Phòng 15",calories:"1/3"}]}}},Z=J,$=(a("cccb"),a("e359")),ee=a("65c6"),te=a("6ac5"),ae=a("cb32"),ne=a("9c40"),se=a("9404"),re=a("a370"),oe=a("eaac"),ie=a("ddd8"),ce=a("0016"),le=a("9989"),ue=Object(c["a"])(Z,v,g,!1,null,null,null),de=ue.exports;f()(ue,"components",{QLayout:l["a"],QHeader:$["a"],QToolbar:ee["a"],QToolbarTitle:te["a"],QAvatar:ae["a"],QBtn:ne["a"],QDrawer:se["a"],QCard:q["a"],QCardSection:re["a"],QTable:oe["a"],QSelect:ie["a"],QIcon:ce["a"],QPageContainer:u["a"],QPage:le["a"]});var fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"window-height window-width row justify-center items-center bg-login"},[a("div",{staticClass:"column q-pa-lg"},[a("div",{staticClass:"row"},[a("q-card",{staticClass:"shadow-24",staticStyle:{width:"500px",height:"400px",opacity:"0.8","background-color":"cyan"},attrs:{circle:""}},[a("q-card-section",{staticClass:"bg-grey-8"},[a("h4",{staticClass:"text-h5 text-blue q-my-md text-center text-bold"},[e._v("WELCOME APPLICATION")])]),a("q-card-section",[a("q-form",{staticClass:"q-px-sm q-pt-xl"},[a("q-input",{attrs:{rounded:"",standout:"",clearable:"",type:"email",label:"Username/Email"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"email"}})]},proxy:!0}]),model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),a("br"),a("q-input",{attrs:{rounded:"",standout:"",clearable:"",type:"password",label:"Password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},scopedSlots:e._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"lock"}})]},proxy:!0}]),model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),a("br"),a("q-card-actions",{staticClass:"q-px"},[a("q-btn",{staticClass:"full-width text-white",attrs:{unelevated:"",rounded:"",size:"lg",color:"amber",label:"Sign In"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)},click:function(t){return e.login()}}})],1)],1)],1)])])},me=[],he={name:"Login",data:function(){return{form:{username:"",password:"",currentUserToken:"",errors:{}}}},created:function(){this.loadCurrentUser()},methods:{loadCurrentUser:function(){if(localStorage.getItem("currentUserToken"))return this.currentUserToken=localStorage.getItem("currentUserToken"),console.log(this.currentUserToken),this.currentUserToken},login:function(){var e=this,t={"Content-Type":"application/json"};""!==this.form.username&&""!==this.form.password?B.a.post(E.ROOT_URL+"AIViewService/api/auth/signin",this.form,t).then((function(t){200===t.status&&(console.log(t),localStorage.setItem("currentUserToken",t.data.data.token),e.$toasted.success("Đăng nhập thành công!").goAway(500),setTimeout(function(){this.$router.push("/")}.bind(e),800))})).catch((function(t){e.errors=t.response,401===e.errors.status?e.$toasted.info(e.errors.data.message).goAway(500):e.$toasted.error("Đăng nhập thất bại").goAway(500)})):this.$toasted.error("Cần điền đủ thông tin...").goAway(500)}}},pe=he,ve=(a("d6db"),a("0378")),ge=a("27f9"),be=a("4b7e"),Ae=Object(c["a"])(pe,fe,me,!1,null,null,null),je=Ae.exports;f()(Ae,"components",{QPage:le["a"],QCard:q["a"],QCardSection:re["a"],QForm:ve["a"],QInput:ge["a"],QIcon:ce["a"],QBtn:ne["a"],QCardActions:be["a"]}),n["a"].use(p["a"]);var we=[{path:"/",name:"Home",component:de},{path:"/login",name:"Login",component:je}],ye=new p["a"]({mode:"history",base:"/",routes:we}),ke=ye,Le=a("2f62");n["a"].use(Le["a"]);var xe=new Le["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Ie=a("415c"),Ce=a.n(Ie),Se=(a("c867"),a("573e"),a("e54f"),a("b05d"));n["a"].use(Se["a"],{config:{},plugins:{}});var De=a("a65d"),Ee=a.n(De);n["a"].use(Ee.a),n["a"].config.productionTip=!1,n["a"].use(a("2ead"));var Ue={name:"_"};n["a"].use(Ce.a,Ue),new n["a"]({router:ke,store:xe,render:function(e){return e(h)}}).$mount("#app"),window._=a("2ef0")},"68c8":function(e,t,a){},"909f":function(e,t,a){},"97b7":function(e,t,a){"use strict";a("68c8")},c867:function(e,t,a){},cccb:function(e,t,a){"use strict";a("909f")},cf05:function(e,t){e.exports="data:image/png;base64,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"},d6db:function(e,t,a){"use strict";a("24d3")}});
//# sourceMappingURL=app.ddec13fe.js.map